<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Get the top 10 AI news stories delivered to your inbox daily. Curated by AI agents.">
  <title>AI News Daily</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: ui-sans-serif, system-ui, sans-serif;
      font-weight: 300;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  </style>
</head>
<body class="bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-100">
  <main class="max-w-xl mx-auto px-6 py-20 min-h-screen">

    <!-- Header -->
    <section class="mb-14">
      <div class="text-6xl mb-4">ðŸ¤–</div>
      <h1 class="text-xl font-normal mb-2">AI News Daily</h1>
      <p class="text-sm text-slate-600 dark:text-slate-400">
        Top 10 AI stories, delivered every morning
      </p>
    </section>

    <!-- About -->
    <section class="my-9 text-sm">
      <h3 class="mb-3 font-normal">About</h3>
      <div class="text-slate-600 dark:text-slate-400 leading-relaxed">
        <p class="mb-3">
          A daily newsletter featuring the most important AI developments, curated by autonomous AI agents.
        </p>
        <p>
          Every morning at 8:00 AM UTC, our agents search the web for breaking AI news,
          analyze hundreds of articles, and select the top 10 stories that matter most.
        </p>
      </div>
    </section>

    <!-- What You Get -->
    <section class="my-14 text-sm">
      <h3 class="mb-6 font-normal">What you get</h3>
      <div class="flex flex-col gap-6">

        <div class="flex">
          <div class="mr-8 max-w-[100px] w-full text-slate-400 dark:text-slate-500 flex-shrink-0">
            Daily
          </div>
          <div class="flex flex-col flex-1">
            <h4 class="font-normal">10 curated stories</h4>
            <p class="text-slate-600 dark:text-slate-400 mt-1">
              The most important AI news from the past 24 hours
            </p>
          </div>
        </div>

        <div class="flex">
          <div class="mr-8 max-w-[100px] w-full text-slate-400 dark:text-slate-500 flex-shrink-0">
            Quality
          </div>
          <div class="flex flex-col flex-1">
            <h4 class="font-normal">Clear summaries</h4>
            <p class="text-slate-600 dark:text-slate-400 mt-1">
              Each story explained in 2-3 sentences with context on why it matters
            </p>
          </div>
        </div>

        <div class="flex">
          <div class="mr-8 max-w-[100px] w-full text-slate-400 dark:text-slate-500 flex-shrink-0">
            Coverage
          </div>
          <div class="flex flex-col flex-1">
            <h4 class="font-normal">Diverse topics</h4>
            <p class="text-slate-600 dark:text-slate-400 mt-1">
              LLMs, products, research, funding, policy, ethics, open source, and more
            </p>
          </div>
        </div>

        <div class="flex">
          <div class="mr-8 max-w-[100px] w-full text-slate-400 dark:text-slate-500 flex-shrink-0">
            Free
          </div>
          <div class="flex flex-col flex-1">
            <h4 class="font-normal">No cost, no spam</h4>
            <p class="text-slate-600 dark:text-slate-400 mt-1">
              100% free forever. Unsubscribe anytime with one click.
            </p>
          </div>
        </div>

      </div>
    </section>

    <!-- Subscribe -->
    <section class="my-14 text-sm">
      <h3 class="mb-6 font-normal">Subscribe</h3>
      <form id="signupForm" class="max-w-md">
        <div class="flex flex-col gap-3">
          <input
            type="email"
            id="email"
            name="email"
            placeholder="your@email.com"
            required
            autocomplete="email"
            class="px-4 py-2.5 text-sm border border-slate-200 dark:border-slate-800 rounded-md
                   bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100
                   placeholder:text-slate-400 dark:placeholder:text-slate-500
                   focus:outline-none focus:ring-2 focus:ring-slate-400 dark:focus:ring-slate-600
                   transition-all"
          >
          <button
            type="submit"
            id="submitBtn"
            class="px-4 py-2.5 text-sm bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900
                   rounded-md hover:bg-slate-800 dark:hover:bg-slate-200
                   transition-colors disabled:opacity-50 disabled:cursor-not-allowed
                   font-normal"
          >
            Subscribe
          </button>
        </div>
        <div id="message" class="mt-3 text-sm hidden"></div>
      </form>
    </section>

    <!-- Footer -->
    <footer class="mt-20 pt-6 border-t border-slate-200 dark:border-slate-800 text-sm text-slate-400 dark:text-slate-500">
      <p>Powered by AI agents â€¢ Delivered via Plunk</p>
      <p class="mt-2">By subscribing, you agree to receive daily emails. Unsubscribe anytime.</p>
    </footer>

  </main>

  <script>
    const form = document.getElementById('signupForm');
    const emailInput = document.getElementById('email');
    const submitBtn = document.getElementById('submitBtn');
    const messageDiv = document.getElementById('message');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const email = emailInput.value.trim();

      if (!email) {
        showMessage('Please enter your email address', 'error');
        return;
      }

      submitBtn.disabled = true;
      submitBtn.textContent = 'Subscribing...';
      messageDiv.classList.add('hidden');

      try {
        const response = await fetch('/api/subscribe', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ email }),
        });

        const data = await response.json();

        if (response.ok && data.success) {
          showMessage('âœ“ Success! Check your email to confirm.', 'success');
          emailInput.value = '';
        } else {
          showMessage(data.error || 'Something went wrong. Please try again.', 'error');
        }
      } catch (error) {
        console.error('Signup error:', error);
        showMessage('Network error. Please check your connection.', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Subscribe';
      }
    });

    function showMessage(text, type) {
      messageDiv.textContent = text;
      messageDiv.className = `mt-3 text-sm ${
        type === 'success'
          ? 'text-green-600 dark:text-green-400'
          : 'text-red-600 dark:text-red-400'
      }`;
      messageDiv.classList.remove('hidden');
    }

    // Auto-focus email input
    emailInput.focus();

    // Dark mode support
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
  </script>
</body>
</html>
